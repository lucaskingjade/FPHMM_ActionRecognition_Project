function [ W ] = NewWcreated( T, M )
% Exemple :
%   W = [
%          1  0   0
%         -1  1   0
%          0  0   0
%          0  1   0
%       -0.5  0  0.5
%          1  -2  1
%              0  1   0
%           -0.5  0  0.5
%              1  -2  1 
%              .  .  .
%              .  .  .
%              .  .  .
%                          0  1
%                          -1 1
%                          0  0
% ]

%   oldW = [
%          1  0   0
%          0 0.5  0
%         -2  1   0
%          0  1   0
%       -0.5  0  0.5
%          1  -2  1
%              0  1   0
%           -0.5  0  0.5
%              1  -2  1 
%              .  .  .
%              .  .  .
%              .  .  .
%                          0  1
%                        -0.5 0
%                          1  -2
% ]


% T = 6;
% M = 2;

%etablir la matric W
L = ones(2,2);  %L_(1)=L(1,1);L+(1)=L(1,2);L_(2)=L(2,1);L+(2)=(2,2);
ww = [-0.5 0 0.5;1 -2 1];  
 for t = 1:T  
    switch t
      case 1,
        w0 = zeros(T,1);
        w0(t) = 1;
        
        w1 = zeros(T,1);
        %w1(1:L(1,2)+1,:) = [ww(1,(L(1,1)+1):L(1,1)+1+L(1,2))]';
        w1(1:L(1,2)+1,:) = [-1 1]';
        w2 = zeros(T,1);
        %w2(1:L(2,2)+1,:) = [ww(2,(L(2,1)+1):L(2,1)+1+L(2,2))]';
        w2(1:L(2,2)+1,:) = [0 0]';      

        for i = 1:T
            w0M(((i-1)*M+1):i*M,:) = w0(i)*eye(M,M);
            w1M(((i-1)*M+1):i*M,:) = w1(i)*eye(M,M);
            w2M(((i-1)*M+1):i*M,:) = w2(i)*eye(M,M);
        end
        W(:,3*(t-1)*M+1:3*M*t) = [w0M,w1M,w2M];        
      case T,
        w0 = zeros(T,1);
        w0(t) = 1;
        
        w1 = zeros(T,1);
        %w1(T-L(1,1):T,:) = [ww(1,1:L(1,1)+1)]';
        w1(T-L(1,1):T,:) = [-1 1]';
        
        w2 = zeros(T,1);
        %w2(T-L(2,1):T,:) = [ww(2,1:L(2,1)+1)]';
        w2(T-L(2,1):T,:) = [0 0]';
        
        for i = 1:T
            w0M(((i-1)*M+1):i*M,:) = w0(i)*eye(M,M);
            w1M(((i-1)*M+1):i*M,:) = w1(i)*eye(M,M);
            w2M(((i-1)*M+1):i*M,:) = w2(i)*eye(M,M);
        end
        W(:,3*(t-1)*M+1:3*M*t) = [w0M,w1M,w2M];    
      otherwise, 
 
         w0 = zeros(T,1);
         w0(t) = 1;
         
         w1 = zeros(T,1);
         w1(t-L(1,1):t+L(1,2),:) = [ww(1,:)]';
         
         w2 = zeros(T,1);
         w2(t-L(2,1):t+L(2,2),:) = [ww(2,:)]';
        
         for i = 1:T
            w0M(((i-1)*M+1):i*M,:) = w0(i)*eye(M,M);
            w1M(((i-1)*M+1):i*M,:) = w1(i)*eye(M,M);
            w2M(((i-1)*M+1):i*M,:) = w2(i)*eye(M,M);
        end 
        W(:,3*(t-1)*M+1:3*M*t) = [w0M,w1M,w2M];         
    end      
 end  
 W = W';